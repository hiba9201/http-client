# http-client

## Описание
__HTTP-клиент для python.task__

Клиент поддерживает _http-запросы_ и _https-запросы_ 

__Автор:__ Пелевина Анастасия ([pelevina.2000@mail.ru](pelevina.2000@mail.ru))

## Состав

* `http_client.py` - точка входа в программу

__Пакет `/logic`:__

* `utils.py` - вспомогательные методы
* `network.py` - работа с сокетами
* `errors.py` - кастомные ошибки

## Использование
 `http_client.py [-h] [-a AGENT] [-n] [-o OUTPUT] [-d HEADERS] [-c HOST]
                      [-m METHOD] [-r] [-x MAX_REDIRECTS]
                      url`

__Позиционные аргументы:__

* `url` - Url запроса

__Вариативные аргументы:__

* `-h`, `--help` - показать справку
* `-a AGENT`, `--agent AGENT` - изменить значение заголовка __User-Agent__ на `AGENT`
* `-n`, `--no-keep-alive` - поменять значение заголовка __Connection__ с _keep-alive_ на _close_
* `-o OUTPUT`, `--output OUTPUT` - если ссылка на изображение, то записать его в файл `<OUTPUT>`
* `-d HEADERS`, `--headers HEADERS` - добавить пользовательские заголовки из файла `<HEADERS>`
к основным
* `-c HOST`, `--host HOST` - указать свой хост для запроса
* `-m METHOD`, `--method METHOD` - метод для запроса, GET по умолчанию (другие не реализованы)
* `-r`, `--no-redirects` - запретить редиректы
* `-x MAX_REDIRECTS`, `--max-redirects MAX_REDIRECTS` - указать максимальное число редиректов




 
## Реализация

__На данный момент есть следующие модули:__
* `http_client.py` - точка входа в программу, здесь происходят 
вызовы парсеров для аргументов командной строки и url, а также 
инициализация `Network()` для отправки и приема запроса
* `utils.py` - содержит класс со вспомогательными методами для парсинга _url_ 
на составные части, формирования массива заголовков из файла с переданным именем, 
парсинга старотовой строки http-ответа
* `network.py` - работа с сокетами. Есть класс `Network`, 
при инициализации создающий сокет и поля с хостом, протоколом и
 адресом. В нем также примутствуют методы 
 для соединения с хостом, формирования и отправки _GET-запроса_, 
 метод для получения и обработки ответа, в котором данные читаются с использованием `socket.makefile()`
 
 На модули `network.py` и `utils.py` написаны тесты
 
 __Покрытие тестами составляет 76%:__
 
        Stmts / Miss / Cover
         100  /  24  /  76%